# JCP APIs

The **JCP APIs** is a Spring Boot application that provide JOSP Cloud Platform's
core APIs. These APIs are called exclusively by [JOSP JOD](../jospJOD/README.md)
and [JOSP JSL](../jospJSL/README.md).

The APIs are provided by following controllers:
* [Object](object.md)
* [ObjectPermissions](object_permissions.md)
* [Service](service.md)
* [User](user.md)

- JCP APIs are provided only via [HTTPS](https.md) protocol.
- JCP Clients, before send request to the JCP APIs, must authenticate them self
with the APIs using the [OAuth2](oauth2.md) authentication flows.
- The JCP APIs provides also documentation ([Swagger](swagger.md)) pages self-hosted.
These pages are generated by the Swagger's configuration module of SpringBoot.
- Finally, to store his data, the JCP APIs connects to ["jcp_apis"](db.md) DB.

The JCP APIs share a set of source code files containing classes and definitions
used to call and process APIs queries. This set of source code is called **JCP
APIs Public** and is shared with [JOSP JOD](../jospJOD/README.md) and
[JOSP JSL](../jospJSL/README.md) components as Gradle's dependency.

**NB:** in the 2.0.0 version of JCP APIs, it includes also the [JOSP GWs](../jospGWs/README.md).

**Versions:**<br>
  * v. 2.0.0:
    initial version that provide JCP APIs v 2.0 used by JOSP JOD v. 2.0.0,
    JOSP JSL v. 2.0.0 and JOSP GWs v. 2.0.0

[changelog](CHANGELOG.md) - [todos](TODOS.md)


## Gradle tasks

**Runner tasks:**<br>
  During the JCP APIs startup, it connects to the DBMS and (if not) initialize
  the ```jcp_apis``` DB's tables; and start listening for incoming HTTPS requests.

  * ```./gradlew jcpAPI_Start```<br>
    startup the Spring Boot application for JCP APIs.
    the JCP APIs's default port is ```9001```
    
  * ```./gradlew jcpAPI_Stop```<br>
    halt the Spring Boot application for JCP APIs.<br>
    **NB:** not yet implemented.

**Cleaner tasks:**<br>
  * ```./gradlew jcpAPI_Clean```<br>
    delete all tables from the ```jcp_apis``` DB.<br>
    **NB:** not yet implemented.

**Publish tasks:**<br>
  The JCP APIs Public can publish only "src" and "docs" packages. The binary
  package is not provided because the other JOSP components resolve the dependencies
  via JOSP Commons's sourceSet output.
   
  * ```./gradlew jcpAPI_PublishToLocal```<br>
    generate the Java docs of the JCP APIs Public source code, pack them in a jar
    archive, like the source code files; and publish them to local maven repo.
   
  * ```./gradlew jcpAPI_PublishToSonatype```<br>
    generate the Java docs of the JCP APIs Public source code, pack them in a jar
    archive, like the source code files; and publish them to public Sonatype repo.


## Properties

*SpringBoot's properties:*
db
auth
...


## Connections

**From clients:**<br>
  Clients: self, JOD, JSL

**To JCP APIs (self):**<br>
  ...

**To DBMS:**<br>
  [DBMS - Connections](../dockers/dbms.md#Connections)

**To Auth:**<br>
  [Auth - Connections](../dockers/auth.md#Connections)

**To JOSP GWs:**<br>
  [JOSP GWs - Connections](../jospGWs/README.md#Connections)